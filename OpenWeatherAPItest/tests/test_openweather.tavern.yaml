test_name: Basic API connection - positive

stages:
  - name: Connect to standard URL with right API_KEY (read from env_var)
    request:
      url: "https://api.openweathermap.org/data/2.5/weather?q=London&APPID={tavern.env_vars.WEATHER_API_KEY:s}"
      method: GET
    response:
      status_code: 200

---

test_name: Basic API connection - no api key

stages:
  - name: Connect to standard URL with no API_KEY (read from env_var)
    request:
      url: "https://api.openweathermap.org/data/2.5/weather?q=London"
      method: GET
    response:
      status_code: 401
      body:
        message: "Invalid API key. Please see http://openweathermap.org/faq#error401 for more info."

